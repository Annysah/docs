To renew and hot-reload the Redis server certificate,
we will need a Redis-specific systemd override file that can tell Redis to refresh its certificates.
To install the override, run:

<DocConfig>
  {({ linux }) => (
    <CodeBlock autoCopy language="bash">
      {`sudo mkdir /etc/systemd/system/cert-renewer@${linux.systemdUnitName}.service.d
cat <<EOF | sudo tee /etc/systemd/system/cert-renewer@${linux.systemdUnitName}.service.d/override.conf
[Service]
; "Environment=" overrides are applied per environment variable. This line does not
; affect any other variables set in the service template.
Environment=CERT_LOCATION=/var/lib/redis/redis.crt \\\\
            KEY_LOCATION=/var/lib/redis/redis.key \\\\
            REDIS_USERNAME=default \\\\
            REDISCLI_AUTH=""
\n; Empty ExecStartPost (Don't attempt to restart ${linux.systemdUnitName}.service)
ExecStartPost=
ExecStartPost=redis-cli --user "\\\$REDIS_USERNAME" --tls --cacert /var/lib/redis/ca.crt config set tls-cert-file \\\$CERT_LOCATION
EOF`}
    </CodeBlock>
  )}
</DocConfig>

If you use password authentication in Redis,
you'll need to update the `REDIS_USERNAME` and/or `REDISCLI_AUTH`.
Otherwise, leave them alone.
